---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import {getCollection} from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
const posts = (await getCollection('blog')).sort(
    (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<!doctype html>
<html lang="en">
<head>
  <BaseHead/>
  <style>
    ul {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    ul li * {
      text-decoration: none;
      transition: 0.2s ease;
    }

    ul li img {
      margin-bottom: 0.5rem;
      border-radius: 12px;
    }

    ul li a {
      display: block;
    }

    .title {
      margin: 0;
      color: rgb(var(--black));
      line-height: 1;
    }

    .date {
      margin: 0;
      color: rgb(var(--gray));
    }

    ul li a:hover h4,
    ul li a:hover .date {
      color: rgb(var(--accent));
    }

    ul a:hover img {
      box-shadow: var(--box-shadow);
    }
  </style>
</head>
<body class="bg-light-background">
<Header/>
<main class="w-full px-0 xl:px-8 flex justify-center">
  <section class="w-10/12 xl:w-2/3 p-2">
    <h1 class="text-4xl text-accent-solid py-2 text-center">Wow, its a blog</h1>
    <p class="py-2 text-center px-6 xl:px-48 text-dark-gray">Who'da thunk it, this is essentially
      just a stream of consciousness that may, or more likely may not be updated, enjoy your stay,
      and there are no refreshments</p>
    <ul>
        {
            posts.sort((a, b) => b.data.pubDate - a.data.pubDate).map((post) => (
                <li class="w-full fade-in">
                  <div class="flex flex-row w-full">
                    <div class="w-1/2 px-2 pb-1 xl:p-2 flex justify-end">
                      <img class="max-w-full max-h-48 xl:max-h-64" src={post.data.heroImage}
                           alt=""/>
                    </div>
                    <div class="w-1/2 px-2 pb-1 pt-4 xl:pt-8 xl:p-2">
                      <a href={`/blog/${post.slug}`} class="cursor-pointer">
                        <p class="text-2xl text-accent-solid">{post.data.title} <span
                            class="text-sm italic text-dark-gray"><FormattedDate
                            date={post.data.pubDate}/></span></p>
                        <div>
                          <p class="text-dark-gray">
                              {post.data.description}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>
                </li>
            ))
        }
    </ul>
  </section>
</main>
</body>
</html>
